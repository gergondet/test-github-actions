name: QWT with brew?

on: push

jobs:

  qwt-macos:
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v1
    - name: Install Qwt
      run: |
        set -x
        brew install qt5 qwt
    - name: Build
      run: |
        set -x
        mkdir build
        cd build
        export CMAKE_INSTALL_PREFIX=/usr/local/opt/qt:$CMAKE_INSTALL_PREFIX
        cmake ../
        make
        otool -L main
        ./main

  qwt-xenial:
    runs-on: ubuntu-16.04
    steps:
    - uses: actions/checkout@v1
    - name: Install Qwt
      run: |
        set -x
        sudo apt-get install -y libqwt-qt5-dev qt5-default
    - name: Build
      run: |
        set -x
        mkdir build
        cd build
        cmake ../
        make
        ldd main
        ./main

  qwt-bionic:
    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v1
    - name: Install Qwt
      run: |
        set -x
        sudo apt-get install -y libqwt-qt5-dev qt5-default
    - name: Build
      run: |
        set -x
        mkdir build
        cd build
        cmake ../
        make
        ldd main
        ./main
